<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="renv::status() reports issues caused by inconsistencies across the project
lockfile, library, and dependencies(). In general, you should strive to
ensure that status() reports no issues, as this maximises your chances of
successfully restore()ing the project in the future or on another machine.
renv::load() will report if any issues are detected when starting an
renv project; we recommend resolving these issues before doing any
further work on your project.
See the headings below for specific advice on resolving any issues
revealed by status()."><title>Report inconsistencies between lockfile, library, and dependencies — status • renv</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.6/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.6/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Report inconsistencies between lockfile, library, and dependencies — status"><meta property="og:description" content="renv::status() reports issues caused by inconsistencies across the project
lockfile, library, and dependencies(). In general, you should strive to
ensure that status() reports no issues, as this maximises your chances of
successfully restore()ing the project in the future or on another machine.
renv::load() will report if any issues are detected when starting an
renv project; we recommend resolving these issues before doing any
further work on your project.
See the headings below for specific advice on resolving any issues
revealed by status()."><meta property="og:image" content="https://rstudio.github.io/renv/logo.svg"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KHBDBW7');</script><!-- End Google Tag Manager --></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">renv</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/renv.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Basics</h6>
    <a class="dropdown-item" href="../articles/package-sources.html">Package sources</a>
    <a class="dropdown-item" href="../articles/package-install.html">Installing packages</a>
    <a class="dropdown-item" href="../articles/python.html">Using Python with renv</a>
    <a class="dropdown-item" href="../articles/faq.html">Frequently asked questions</a>
    <a class="dropdown-item" href="../articles/packrat.html">packrat vs. renv</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Deployment</h6>
    <a class="dropdown-item" href="../articles/ci.html">Using renv with continuous integration</a>
    <a class="dropdown-item" href="../articles/docker.html">Using renv with Docker</a>
    <a class="dropdown-item" href="../articles/rsconnect.html">Using renv with Posit Connect</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Advanced</h6>
    <a class="dropdown-item" href="../articles/packages.html">Package development</a>
    <a class="dropdown-item" href="../articles/profiles.html">Project profiles</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rstudio/renv/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Report inconsistencies between lockfile, library, and dependencies</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstudio/renv/blob/HEAD/R/status.R" class="external-link"><code>R/status.R</code></a></small>
      <div class="d-none name"><code>status.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>renv::status()</code> reports issues caused by inconsistencies across the project
lockfile, library, and <code><a href="dependencies.html">dependencies()</a></code>. In general, you should strive to
ensure that <code>status()</code> reports no issues, as this maximises your chances of
successfully <code><a href="restore.html">restore()</a></code>ing the project in the future or on another machine.</p>
<p><code><a href="load.html">renv::load()</a></code> will report if any issues are detected when starting an
renv project; we recommend resolving these issues before doing any
further work on your project.</p>
<p>See the headings below for specific advice on resolving any issues
revealed by <code>status()</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">status</span><span class="op">(</span></span>
<span>  project <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  library <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lockfile <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sources <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cache <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>project</dt>
<dd><p>The project directory. If <code>NULL</code>, then the active project will
be used. If no project is currently active, then the current working
directory is used instead.</p></dd>


<dt>...</dt>
<dd><p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p></dd>


<dt>library</dt>
<dd><p>The library paths. By default, the library paths associated
with the requested project are used.</p></dd>


<dt>lockfile</dt>
<dd><p>Path to a lockfile. When <code>NULL</code> (the default), the <code>renv.lock</code> located in the root of the current project will be used.</p></dd>


<dt>sources</dt>
<dd><p>Boolean; check that each of the recorded packages have a
known installation source? If a package has an unknown source, renv
may be unable to restore it.</p></dd>


<dt>cache</dt>
<dd><p>Boolean; perform diagnostics on the global package cache?
When <code>TRUE</code>, renv will validate that the packages installed into the
cache are installed at the expected + proper locations, and validate the
hashes used for those storage locations.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>This function is normally called for its side effects, but
it invisibly returns a list containing the following components:</p><ul><li><p><code>library</code>: packages in your library.</p></li>
<li><p><code>lockfile</code>: packages in the lockfile.</p></li>
<li><p><code>synchronized</code>: are the library and lockfile in sync?</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="missing-packages">Missing packages<a class="anchor" aria-label="anchor" href="#missing-packages"></a></h2>
    <p>First, ensure that all packages used by the project are installed. This is
important to do first because if any packages are missing we can't tell for
sure that a package isn't used; it might be a dependency that we don’t know
about.</p>
<p>There are four possibilities for an uninstalled package:</p><ul><li><p>If it’s used and recorded, call <code><a href="restore.html">renv::restore()</a></code> to install the version
specified in the lockfile.</p></li>
<li><p>If it’s used and not recorded, call <code><a href="install.html">renv::install()</a></code> to install it
from CRAN or elsewhere.</p></li>
<li><p>If it’s not used and recorded, call <code><a href="snapshot.html">renv::snapshot()</a></code> to
remove it from the lockfile.</p></li>
<li><p>If it's not used and not recorded, there's nothing to do. This the most
common state because you only use a small fraction of all available
packages in any one project.</p></li>
</ul><p>If you have multiple packages in an inconsistent state, we recommend
<code><a href="restore.html">renv::restore()</a></code>, then <code><a href="install.html">renv::install()</a></code>, then <code><a href="snapshot.html">renv::snapshot()</a></code>, but
that also suggests you should be running status more frequently.</p>
    </div>
    <div class="section level2">
    <h2 id="lockfile-vs-dependencies-">Lockfile vs <code><a href="dependencies.html">dependencies()</a></code><a class="anchor" aria-label="anchor" href="#lockfile-vs-dependencies-"></a></h2>
    <p>Next we need to ensure that packages are recorded in the lockfile if and
only if they are used by the project. Fixing issues of this nature only
requires calling  <code><a href="snapshot.html">snapshot()</a></code> because there are four possibilities for
a package:</p><ul><li><p>If it’s used and recorded, it’s ok.</p></li>
<li><p>If it’s used and not recorded, call <code><a href="snapshot.html">renv::snapshot()</a></code> to add it to the
lockfile.</p></li>
<li><p>If it’s not used but is recorded, call <code><a href="snapshot.html">renv::snapshot()</a></code> to remove
it from the lockfile.</p></li>
<li><p>If it’s not used and not recorded, it’s also ok, as it may be a
development dependency.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="out-of-sync-sources">Out-of-sync sources<a class="anchor" aria-label="anchor" href="#out-of-sync-sources"></a></h2>
    <p>The final issue to resolve is any inconsistencies between the version of
the package recorded in the lockfile and the version installed in your
library. To fix these issues you'll need to either call <code><a href="restore.html">renv::restore()</a></code>
or <code><a href="snapshot.html">renv::snapshot()</a></code>:</p><ul><li><p>Call <code><a href="snapshot.html">renv::snapshot()</a></code> if your project code is working. This implies that
the library is correct and you need to update your lockfile.</p></li>
<li><p>Call <code><a href="restore.html">renv::restore()</a></code> if your project code isn't working. This probably
implies that you have the wrong package versions installed and you need
to restore from known good state in the lockfile.</p></li>
</ul><p>If you're not sure which case applies, it's generally safer to call
<code><a href="snapshot.html">renv::snapshot()</a></code>. If you want to rollback to an earlier known good
status, see <code><a href="history.html">history()</a></code> and <code><a href="history.html">revert()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># disable automatic snapshots</span></span></span>
<span class="r-in"><span><span class="va">auto.snapshot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"renv.config.auto.snapshot"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>renv.config.auto.snapshot <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># initialize a new project (with an empty R library)</span></span></span>
<span class="r-in"><span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="init.html">init</a></span><span class="op">(</span>bare <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># install digest 0.6.19</span></span></span>
<span class="r-in"><span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="install.html">install</a></span><span class="op">(</span><span class="st">"digest@0.6.19"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># save library state to lockfile</span></span></span>
<span class="r-in"><span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="snapshot.html">snapshot</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># remove digest from library</span></span></span>
<span class="r-in"><span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="remove.html">remove</a></span><span class="op">(</span><span class="st">"digest"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># check library status</span></span></span>
<span class="r-in"><span><span class="fu">renv</span><span class="fu">::</span><span class="fu">status</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># restore lockfile, thereby reinstalling digest 0.6.19</span></span></span>
<span class="r-in"><span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="restore.html">restore</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># restore automatic snapshots</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>renv.config.auto.snapshot <span class="op">=</span> <span class="va">auto.snapshot</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p><p>Developed by Kevin Ushey, <a href="http://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

  </div></footer><!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KHBDBW7" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


  </body></html>

